<div class="table-container">
  <table class="usuarios-table">
    <thead>
      <tr>
        <th>Usuario</th>
        <th>Email</th>
        <th>Rol</th>
        <th>Escuela</th>
        <th>Dependencia</th>
        <th>Oficina</th>
        <th>Estado</th>
        <th class="actions-column">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let usuario of usuarios" [class.inactivo]="!usuario.esActivo">
        <!-- Usuario (Avatar + Nombre) -->
        <td class="user-cell">
          <div class="user-info">
            <div class="avatar" [style.background]="getAvatarColor(usuario)">
              {{ getInitials(usuario) }}
            </div>
            <div class="user-details">
              <span class="user-name">{{ usuario.nombre }} {{ usuario.apellido }}</span>
              <!-- <span class="user-id">ID: {{ usuario.id }}</span> -->
            </div>
          </div>
        </td>

        <!-- Email -->
        <td class="email-cell">
          <a [href]="'mailto:' + usuario.email" class="email-link">
            {{ usuario.email }}
          </a>
        </td>

        <!-- Rol -->
        <td>
          <span class="badge badge-rol">
            {{ usuario.rol.nombreRol }}
          </span>
        </td>

        <!-- Escuela -->
        <td class="info-cell">
          <span *ngIf="usuario.escuela" class="info-text">
            {{ usuario.escuela.nombreEscuela }}
          </span>
          <span *ngIf="!usuario.escuela" class="no-data">—</span>
        </td>

        <!-- Dependencia -->
        <td class="info-cell">
          <span *ngIf="usuario.dependencia" class="info-text">
            {{ usuario.dependencia.nombre }}
          </span>
          <span *ngIf="!usuario.dependencia" class="no-data">—</span>
        </td>

        <!-- Oficina -->
        <td class="info-cell">
          <span *ngIf="usuario.oficina" class="info-text">
            {{ usuario.oficina }}
          </span>
          <span *ngIf="!usuario.oficina" class="no-data">—</span>
        </td>

        <!-- Estado -->
        <td>
          <span class="badge" [class.badge-activo]="usuario.esActivo" [class.badge-inactivo]="!usuario.esActivo">
            <svg *ngIf="usuario.esActivo" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="20 6 9 17 4 12"></polyline>
            </svg>
            <svg *ngIf="!usuario.esActivo" xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
            {{ usuario.esActivo ? 'Activo' : 'Inactivo' }}
          </span>
        </td>

        <!-- Acciones -->
        <td class="actions-cell">
          <div class="actions-buttons">
            <button 
              class="btn-icon btn-toggle" 
              (click)="onToggleActivo(usuario)"
              [title]="usuario.esActivo ? 'Desactivar Usuario' : 'Activar Usuario'">
              <svg *ngIf="usuario.esActivo" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
              <svg *ngIf="!usuario.esActivo" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 9.9-1"></path>
              </svg>
            </button>

            <button 
              class="btn-icon btn-edit" 
              [routerLink]="['/usuarios', usuario.id, 'editar']"
              title="Editar">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
              </svg>
            </button>

            <button 
              class="btn-icon btn-delete" 
              (click)="onDelete(usuario)"
              title="Eliminar">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Empty state -->
  <div *ngIf="usuarios.length === 0" class="empty-table">
    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
      <circle cx="9" cy="7" r="4"></circle>
      <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
      <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
    </svg>
    <p>No hay usuarios registrados</p>
  </div>
</div>
